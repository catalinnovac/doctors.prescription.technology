<!DOCTYPE html>
<html>
	<head>
		<title>Prescription Technology</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="css/reset.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="css/responsive.gs.24col.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
		<link rel="stylesheet" type="text/css" href="css/styles.css" media="screen" />
		<script type="text/javascript" src="cordova.js"></script>
		<script type="text/javascript" src="js/respond.min.js"></script>
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="js/custom.jquery.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic" rel="stylesheet" type="text/css" />
	</head>
	<body id="index">
		<!-- Preloader -->
		<div id="page-preloader" class="ajax-loader">
			<img src="img/loading.gif" alt=""/>
		</div>
		
		<div class="container wrap">
			<div class="row gutters">
				<div class="col span_24">
					<a href="/" id="logo" title="Prescription Technology - Doctors Interface" /><img src="img/logo_PT.png" alt="" /></a>
					<a href="/" id="nav-toggle" title="Prescription Technology - Doctors Interface Menu" />Menu</a>
				</div>
			</div>
			<div class="row gutters">
				<div class="col span_24">
					<h1>Invoices</h1>
					<div id="calendar">
						<ul class="left-cal" id="months">
							<li id="anchor"></li>
							<li id="may-2014"><span class="year 2014">2014</span><span class="month may"></span></li>
							<li id="june-2014"><span class="year 2014">2014</span><span class="month june"></span></li>
							<li id="july-2014"><span class="year 2014">2014</span><span class="month july"></span></li>
							<li id="august-2014"><span class="year 2014">2014</span><span class="month august"></span></li>
							<li id="september-2014"><span class="year 2014">2014</span><span class="month september"></span></li>
							<li id="october-2014"><span class="year 2014">2014</span><span class="month october"></span></li>
							<li id="november-2014"><span class="year 2014">2014</span><span class="month november"></span></li>
							<li id="december-2014"><span class="year 2014">2014</span><span class="month december"></span></li>
							<li id="january-2015"><span class="year 2015">2015</span><span class="month january"></span></li>
						</ul>
						<ul class="right-cal" id="cal-days">
							<li id="anchor"></li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<footer class="container wrap">
			<div class="row gutters">
				<div class="col span_12">
					This software and all connected databases are the exclusive property of
					<strong>HR Healthcare Ltd</strong><br>
					All rights are reserved by <strong>HR Healthcare Ltd, The Office, Britannia Way, Waters Meeting, Bolton, BL2
					2HH. 01204 559 999</strong> <br>
					All Intellectual Property Rights belong to <strong>HR Healthcare Ltd, The Office, Britannia Way, Waters Meeting,
					Bolton, BL2 2HH. 01204 559 999</strong>
				</div>
				<div class="col span_12">
					Any use, editing, changing, multiplication or commercial
					use (including but not limited to selling, licensing of this software
					and/or parts of it and/or its connected database information), independent
					of any changes being done first, is prohibited.
				</div>
			</div>
		</footer>
		<script type="text/javascript">
			function PowerUp() {
                var date = new Date();
                // 8 7 6 5 4 3 2 1 0 11 10 9 8 7 6 5 4 3 2 1 0 11 10 9
                var mm = date.getMonth();
                var yy = date.getYear();
                var monthArray = new Array();
                var pivot = mm;
                while (mm >= 0) {
                    //console.log(mm);
                    var date = new Date(yy, mm, 0, 0, 0, 0, 0); // luna din anul curent
                    var date1 = new Date(yy - 1, mm, 0, 0, 0, 0, 0); //aceasi luna din anul anterior
                    monthArray.push(date);
                    monthArray.push(date1);
                    mm--;
                }
                while (pivot <= 11) {
                    //console.log(pivot);
                    var date = new Date(yy, pivot, 0, 0, 0, 0, 0); // luna din anul curent
                    var date1 = new Date(yy - 1, pivot, 0, 0, 0, 0, 0); //aceasi luna din anul anterior
                    monthArray.push(date);
                    monthArray.push(date1);
                    pivot++;
                }
                console.log(monthArray);

				$('#nav-toggle').on('touchstart click', function(e){
					e.preventDefault();
                    var extra = new Array();
                    extra.push({ key:"open",value:"1"});
                    doctors.sendMessage("DRAWER",JSON.stringify(extra));
				});

                /*
                $.ajax({
                    url: 'http://doctors.prescription.technology/ws/invoices.asp',
                    type: 'GET',
                    beforeSend: function (xhr) { xhr.setRequestHeader('Authorization', doctors.getToken()); }
                }).fail(function (xhr, textStatus, error) { alert(textStatus); })
                .done(function (data, textStatus, xhr) {
                    alert(data);
                    var invoices = JSON.parse(data);
                    var invoicesList = $('#invoices');
                    if (invoices.Invoices.length() > 0) {
                        for (var i = 0; i < invoices.Invoices; i++) {
                            var current_invoices = invoices.Invoices[i];
                            var clone = invoicesList.find('#clone').clone();
                            clone.find('#edit-link').attr('href', current_invoices.OrderNumber.oid_url);
                            clone.children('#customer-placeholder > #customer-info').children('#firstname').text(current_invoices.customer.firstname);
                            clone.children('#customer-placeholder > #customer-info').children('#middleinitial').text(current_invoices.customer.middleinitial);
                            clone.children('#customer-placeholder > #customer-info').children('#lastname').text(current_invoices.customer.lastname);
                            clone.children('#Treatment&Order > #OrderNumber').text(current_invoices.Treatment_Order.OrderNumber);
                            clone.children('#Treatment&Order > #OrderDate').text(current_invoices.Treatment_Order.OrderDate);
                            clone.children('#Treatment&Order > #OrderStatus').text(current_invoices.Treatment_Order.OrderStatus);
                            for (var j = 0; j < current_invoices.Treatment_Order.Meds.length() ; j++) {
                                var li = clone.children('#Treatment&Order > #Meds').find('li.cloneable').clone();
                                li.children('#MedName').text(current_invoices.Treatment_Order.Meds[j].MedName);
                                li.appendTo(clone.children('#Treatment&Order > #Meds'));
                            }
                            clone.children('#Assign_date > #assign_date').text(current_invoices.Assign_date);
                            clone.appendTo($('#invoices'));
                        }
                    } else {

                    }
                });
                */
            };
			$(function() {
	            document.addEventListener("deviceready", PowerUp, false);
				
				/* Only for in-browser (not in Android) testing */
				//PowerUp();
			});
	    </script>
	</body>
</html>